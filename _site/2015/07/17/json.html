<!DOCTYPE html>
<html>
<head>
    <!--
    **
    * 此文档的原作者是PIZn，邮箱pizner@gmail.com
    *
    * 在他的基础上由我做了二次做了修改
    * 本人Eric_Lai,邮箱qq584863350@gmail.com
    * 
    **
    -->
    <meta charset="utf-8" />
    <title>使用第三方库json-lib来传递json格式数据 | Eric_Lai's blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="Eric" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/css/pygments.css" type="text/css">
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <!--[if lt IE 9]>
    <script src="/js/html5.js" type="text/javascript"></script>
    <![endif]-->
</head>
<body id="default">
<div id="head-line"></div>
<div id="content">
    <header id="head">
        <div id="logo">
            <h1>Eric</h1>
            <h2>Be better than yesterday</h2>
        </div>
        <nav id="nav">
            <ul>
                <li class="fn-clear"><a href="" rel="nofollow" class="action"><i class="icon-home"></i> Home</a></li>
                <li class="fn-clear"><a href="/archives.html"><i class="icon-list-ul"></i> Archives</a></li>
                <li class="fn-clear"><a href="/about.html"><i class="icon-info-sign"></i> About</a></li>
                <li class="fn-clear"><a href="/contact.html"><i class="icon-envelope-alt"></i> Contact</a></li>
                <li style="text-align: center"><img src="/images/aboutme.jpg"></li>
            </ul>
        </nav>
    </header>
    <section id="contain">
        <header id="begin">
            <span>2015-07-17 00:00:00 +0800</span>
        </header>
		<article class="post">
    <h1 class="post-title">使用第三方库json-lib来传递json格式数据</h1>
    <h1 id="前言">前言</h1>

<p>由于学校的一个小项目的需要，需要我在android端发起一个POST请求，然后服务端返回一组json数据。为了处理这个事情，今天早早的我就起床准备来写一个servlet的小测试代码。然而看了众多的教程，头晕了很久，照着一些例程来写之后发现打印出来的只有一个样子。但是没有数据。为了这个我一直认为是我的逻辑代码不对。我就先不部署tomcat，在纯java的环境下做了一个测试，最后发现的问题竟然是.....先买个关子，如果你也有这样的情况，请您继续看下去。
构建工程</p>

<p>我使用的是NetBeans的环境，新建工程什么的废话就不说了。为了使用第三方库（json-lib）你首先需要获得它的jar包和一系列相关的支持包。如果你没有的话请按<a href="http://download.csdn.net/detail/haotao_lai/8906333">这里</a>下载。</p>

<p>对于蛋疼的NetBeans，导入包也是一个技术活。记得导入之后，在你需要使用这个包里的资源的地方要import，否则会报错。
做完之后在工程下建几个类，以方便我们的测试。工程目录的图片如下：
<img src="http://img.blog.csdn.net/20150716172207673?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></p>

<h1 id="详细代码">详细代码</h1>

<p>做完这个就开始写代码了，先介绍一下这里面需要自己写的三个类：</p>

<ul>
<li>JavaJson: 这个类是主函数的所在</li>
<li>JsonTool: 这个类是用来将普通对象转化成json格式的工具类</li>
<li>person: 这个Bean是用来创建一个等着被转化对象的实验类<br></li>
</ul>

<p><mark>此处应有颜色，对于Bean类的声明必须使用 public 否则会报错！这里磨了我好长时间呐。</mark></p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">javajson</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JavaJSON</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="s">&quot;eric&quot;</span><span class="o">,</span><span class="s">&quot;18&quot;</span><span class="o">,</span><span class="s">&quot;male&quot;</span><span class="o">);</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">JsonTool</span><span class="o">.</span><span class="na">createJsonString</span><span class="o">(</span><span class="s">&quot;person&quot;</span><span class="o">,</span> <span class="n">person</span><span class="o">));</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JsonTool</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">createJsonString</span><span class="o">(</span><span class="n">String</span> <span class="n">k</span><span class="o">,</span> <span class="n">Object</span> <span class="n">v</span><span class="o">){</span>
        <span class="n">JSONObject</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">JSONObject</span><span class="o">();</span>      
        <span class="n">json</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">k</span><span class="o">,</span> <span class="n">v</span><span class="o">);</span>       
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">age</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">gender</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">n</span><span class="o">,</span> <span class="n">String</span> <span class="n">a</span><span class="o">,</span> <span class="n">String</span> <span class="n">g</span><span class="o">){</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
        <span class="n">age</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
        <span class="n">gender</span> <span class="o">=</span> <span class="n">g</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
   <span class="kd">public</span> <span class="n">String</span> <span class="nf">getAge</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>
   <span class="kd">public</span> <span class="n">String</span> <span class="nf">getGender</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">gender</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">n</span><span class="o">){</span>
      <span class="n">name</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
  <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAge</span><span class="o">(</span><span class="n">String</span> <span class="n">a</span><span class="o">){</span>
      <span class="n">age</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
  <span class="o">}</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGender</span><span class="o">(</span><span class="n">String</span> <span class="n">g</span><span class="o">){</span>
      <span class="n">gender</span> <span class="o">=</span> <span class="n">g</span><span class="o">;</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></div>
<p>结果
<img src="http://img.blog.csdn.net/20150716172956997?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></p>

<p>至此完成整个实验，输出的结果如下图所示：</p>

    <nav class="pagination-link">
        
        <a class="prev" href="/2015/07/13/call-back.html" rel="bookmark">&laquo;&nbsp;我理解的回调（callback）</a>
        
        
        <a class="next" href="/2015/07/18/mysql-netbean.html" rel="bookmark">netbean下部署tomcat服务器连接mysql数据库&nbsp;&raquo;</a>
        
     </nav>
     <div id="disqus_thread"></div>
</article>  

        <center><footer id="foot">
            <p>Copyright © 2015 Eric_Lai All rights reserved.</p>
            <P>This theme template was designed by <a href="http://www.pizn.net" target="_blank" title="the One theme author">PIZn</a>, thanks!</P>
        </footer></center>
    </section>
</div>
<div id="foot-line"></div>
<script src="/js/jquery.js" type="text/javascript"></script>
<script src="/js/jquery.scrollTo.js" type="text/javascript"></script>
<script src="/js/theOne.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
    /**
     * disqus
     */
    var disqusId = $("#disqus_thread");
    if(disqusId && typeof disqusId != "undefined" && disqusId.length != 0) {
        var disqusName = "Ericblog";
        var disqus_shortname = disqusName != "" ? disqusName : "piznblog";
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] ||
                document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    }
});
</script>
</body>
</html>
